name: Build Windows Executable

on:
   push:
     branches:
       - master
   pull_request:
     branches:
       - master

jobs:
   build-windows:
     runs-on: windows-latest

     steps:
       - name: Checkout repository
         uses: actions/checkout@v2

       - name: Set up Python
         uses: actions/setup-python@v2
         with:
           python-version: '3.9'

       - name: Install dependencies
         run: |
           python -m pip install --upgrade pip
           pip install pyinstaller
           pip install -r requirements.txt

       - name: Build executable
         run: pyinstaller --onefile main.py --add-data "venv/lib/python3.9/site-packages/emoji/unicode_codes/emoji.json;emoji/unicode_codes"

       - name: Upload artifact
         uses: actions/upload-artifact@v3
         with:
           name: windows-executable
           path: dist/main.exe